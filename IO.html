<!DOCTYPE html>
<html>
<head>

	<style>
		.img-atr{
			width: 400px;
		}
	</style>
	<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/6.1.19/browser.min.js"></script>-->
</head>
<body>

<img class="img-atr" data-src='images/1.jpg'  />
<br><br><br>
<img class="img-atr" data-src='images/2.jpg'  />
<br><br><br>
<img class="img-atr" data-src='images/3.jpg'  />
<br><br><br>
<img class="img-atr" data-src='images/4.jpg'  />
<br><br><br>
<img class="img-atr" data-src='images/5.jpg'  />
<br><br><br>
<img class="img-atr" data-src='images/6.jpg'  />
<br><br><br>
<img class="img-atr" data-src='images/7.png'  />
<br><br><br>
<img class="img-atr" data-src='images/8.png'  />
<br><br><br>
<img class="img-atr" data-src='images/9.jpg'  />
<br><br><br>
<img class="img-atr" data-src='images/10.jpg'  />
<br><br><br>
<img class="img-atr" data-src='images/11.jpg'  />
<br><br><br>
<script>
//	// 1. Convert node list of all images with
//	// data-src attribute to an array
//	//	const imgs = [ ...document.querySelectorAll('img[data-src]') ];
//	//	console.log(imgs);
//	// 2. Wrap the code on a feature test for IntersectionObserver
//	if ('IntersectionObserver' in window) {
//		// 3. Create the IntersectionObserver and bind it to the function
//		// we want it to work with
//		let observer = new IntersectionObserver(onChange);
//
//		function onChange(changes) {
//			// 4. For each image that we want to change
//			changes.forEach( function(change) {
//				// * take image url from `data-src` attribute
//				change.target.src = change.target.dataset.src;
//			console.log('Intersection Observers is supported');
//			// * Stop observing the current target
//			observer.unobserve(change.target);
//		})
//		}
//
//	// 5. Observe each image derived from the array above
//		document.querySelectorAll('img[data-src]').forEach(function(img) {observer.observe(img)});
//	} else {
//	// 6. if the browser doesn't support Intersection Observer
//	// we log to console and load images manually
//		console.log('Intersection Observers not supported');
//		function loadImages(imgs) {
//			imgs.forEach(function(image) {
//				image.src = image.dataset.src;
//			});
//		}
//		loadImages(imgs);
//	}
//function loadImages(imgs) {
//	imgs.forEach(function(image) {
//		image.src = image.dataset.src;
//	});
//}

document.querySelectorAll('img[data-src]').forEach(function(image) {image.src = image.dataset.src;});
//loadImages(imgs);
</script>

</body>
</html>
